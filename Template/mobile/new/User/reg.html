<!DOCTYPE html >
<html style="font-size: 58.5938px;">
<head>
<meta name="Generator" content="tpshop" />
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<title>用户注册-{$tpshop_config['shop_info_store_title']}</title>
<meta http-equiv="keywords" content="{$tpshop_config['shop_info_store_keyword']}" />
<meta name="description" content="{$tpshop_config['shop_info_store_desc']}" />

<meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, user-scalable=0"/>
<link rel="stylesheet" type="text/css" href="__STATIC__/css/public.css"/>
<link rel="stylesheet" type="text/css" href="__STATIC__/css/login.css"/>
	<link rel="stylesheet" type="text/css" href="__STATIC__/css/main.css">
<script type="text/javascript" src="__STATIC__/js/jquery.js"></script>
<script type="text/javascript" src="__STATIC__/js/layer.js" ></script>
<script src="__PUBLIC__/js/global.js"></script>
<script src="__PUBLIC__/js/mobile_common.js"></script>
	<style type="text/css">
		.register li input[type=password] {
			width: 100%;
			border: none;
			border-radius: 0;
			display: block;
		}
		.register li input[type=username] {
			width: 100%;
			border: none;
			border-radius: 0;
			display: block;
		}
		.register li input[type=email] {
			width: 100%;
			height: 100%;
			border: none;
			border-radius: 0;
			display: block;
		}
	</style>
</head>
<body>

<header>
	<a href="javascript:history.back(-1)" class="back"></a>
	<h3>用户注册</h3>
</header>
<div class="h50"></div>

<!--<header id="header" class='header'>-->
	<!--<div class="h-left"><a href="javascript:history.back(-1)" class="back"></a></div>-->
    <!--<div class="h-mid">用户注册</div>-->
<!--</header>-->



<div id="tbh5v0">
	<div class="log_reg_box">
 				<!--<ul class="tab" id="logRegTab">-->
                    <!--<li id="mob_log" class="curr" onClick="changeForm(this)">-->
                        <!--<span>-->
                            <!--<font>手机注册</font>-->
                        <!--</span>-->
                    <!--</li>-->
                    <!--<li id="email_log" class="curr" onClick="changeForm(this)">-->
                        <!--<span>-->
                            <!--<font>邮箱注册</font>-->
                        <!--</span>-->
                    <!--</li>-->
                <!--</ul>-->

				 <div class="register" id="phonearea">
				<form action="" id="mobileForm" name="mobileForm" method="post"  onsubmit="return check_submit()">

					<div class="title">
						<img src="__STATIC__/images/new/img221.png" alt="">
					</div>
					<ul>
						<div>
							<li><span>邀请码</span><input type="text" id="invite_id" name="invite_id" value="{$invite}"></li>
							<div class="tips">
								<span id="invite_id_notice"></span>
							</div>
						</div>
						<div>
						<li><span>手机号码</span><input type="text" id="username" name="username"  onBlur="checkMobilePhone(this.value);" ></li>
							<div class="tips">
								<span id="mobile_phone_notice"></span>
							</div>
						</div>
						<div>
						<li><span>设置密码</span>
							<input type="password" id="password" name="password"   onBlur="check_password(this.value);"></li>
							<div class="tips">
								<span id="password_notice"></span>
							</div>
						</div>
						<div>
						<li><span>确认密码</span>
							<input type="password" id="password2" name="password2"  onBlur="check_confirm_password(this.value);" ></li>
							<div class="tips">
								<span id="confirm_password_notice"></span>
							</div>
						</div>
						<li class="yzm"><span><i class="e5">验</i><i class="e5">证</i>码</span>
							<input id="mobile_code" rel="mobile"  name="mobile_code"  type="text">
							<input id="zphone" type="button" value="获取验证码 " onClick="sendcode(this)" class="btn-yzm" style="border-radius: 0px">
							<!--<a href="" class="btn-yzm" onClick="sendcode(this)">获取验证码</a>-->
						</li>
					</ul>


					<div class="rule">
						<label for="" class="checkbox2">已阅读并同意</label><a href="">《美之钻服务协议》</a>
					</div>
					<div class="operate">
						<input type="submit" value="提 交" name="Submit" id="btn_submit" >
						<a href="{:U('Mobile/User/login')}" class="btn-login">已有账号点此登录</a>
					</div>
					<div class="other">
						<a href="{:U('Mobile/LoginApi/login',array('oauth'=>weixin))}">使用微信登录</a>
					</div>

			</form>
			</div>
		<!--<div class="register" id="emailarea">-->
			<!--<form action="" id="emailForm" name="emailForm" method="post"  onsubmit="return check_submit()">-->

				<!--<div class="title">-->
					<!--<img src="__STATIC__/images/new/img221.png" alt="">-->
				<!--</div>-->
				<!--<ul>-->
					<!--<div>-->
						<!--<li><span>邮箱地址</span><input type="email" name="username"  value=""  id="username" onBlur="checkEmail2(this.value);" /></li>-->
						<!--<div class="tips">-->
							<!--<span id="email_notice"></span>-->
						<!--</div>-->
					<!--</div>-->
					<!--&lt;!&ndash;<li><span>手机号码</span><input type="text" id="username" name="username"  onBlur="checkMobilePhone(this.value);" ></li>&ndash;&gt;-->
					<!--<div>-->
						<!--<li><span>设置密码</span><input type="password" id="password" name="password"   onBlur="check_password(this.value);"></li>-->
						<!--<div class="tips">-->
							<!--<span id="password_notice"></span>-->
						<!--</div>-->
					<!--</div>-->
					<!--<div>-->
					<!--<li><span>确认密码</span><input type="password" id="password2" name="password2"  onBlur="check_confirm_password(this.value);" ></li>-->
						<!--<div class="tips">-->
							<!--<span id="confirm_password_notice"></span>-->
						<!--</div>-->
					<!--</div>-->
					<!--<li class="yzm"><span><i class="e5">验</i><i class="e5">证</i>码</span>-->
						<!--<input id="mobile_code" rel="mobile"  name="mobile_code"  type="text">-->
						<!--<input id="zphone" type="button" value="获取手机验证码 " onClick="sendcode(this)" class="btn-yzm" style="border-radius: 0px">-->
					<!---->
					<!--</li>-->

						<!--<div class="yanzheng" style=" margin-top:0px;">-->
                              <!--<div class="codeTxt">-->
								<!--<input type="text" id="email_code" rel="email" name="email_code"  placeholder="邮箱验证码"/></div>-->
                                   <!--<div class="codePhoto">-->
									<!--<input id="zemail" type="button" value="获取邮箱验证码 " class="zphone" onClick="sendcode(this)" style=" color:#FFF">-->
                                  <!--</div>-->
						<!--</div> -->
				<!--</ul>-->
				<!--<div class="rule">-->
					<!--<label for="" class="checkbox2">已阅读并同意</label><a href="">《美之钻服务协议》</a>-->
				<!--</div>-->
				<!--<div class="operate">-->
					<!--<input type="submit" value="注 册" name="Submit" id="btn_submit" >-->
					<!--<a href="{:U('Mobile/User/login')}" class="btn-login">已有账号点此登录</a>-->
				<!--</div>-->
				<!--<div class="other">-->
					<!--<a href="{:U('home/LoginApi/login',array('oauth'=>weixin))}">使用微信登录</a>-->
				<!--</div>-->

			<!--</form>-->
		<!--</div>-->

	</div>




</div>
<include file="Public/footer_nav"/>
<!--<div class="h50"></div>-->
<!--&lt;!&ndash; 页底 &ndash;&gt;-->
<!--<ul class="footer">-->
	<!--<li><a href="{:U('Index/index')}">首页</a></li>-->
	<!--<li><a href="{:U('Cart/cart')}">购物车</a></li>-->
	<!--<li><a href="{:U('User/order_list')}">订单</a></li>-->
	<!--<li class="on"><a href="{:U('User/index')}">会员中心</a></li>-->

<!--</ul>-->

<script src="__STATIC__/js/slide.js"></script>
<script src="__STATIC__/js/main.js"></script>
<script type="text/javascript">

setCurrentForm($("#emailForm"));
var flag = false;

function changeForm(obj){
	$(obj).removeClass('currr');
	$(obj).siblings().addClass('currr');
	if($(obj).attr('id')=='mob_log'){
		$('#phonearea').show();
		setCurrentForm($("#mobileForm"))
		$('#emailarea').hide();
	}else{
		$('#phonearea').hide();
		setCurrentForm($("#emailForm"))
		$('#emailarea').show();
	}
}

function setCurrentForm(formObj) {
	currentForm = $(formObj);
}

//function checkEmail2(email){
//	if(email == ''){
//		$('#email_notice').css('color','red');
//		$('#email_notice').html('* 邮件地址不能为空');
//		flag = false;
//	}else if(checkEmail(email)){
//		$('#email_notice').css('color','green');
//		$('#email_notice').html('* 可以注册');
//		flag = true;
//	}else{
//		$('#email_notice').css('color','red');
//		$('#email_notice').html('* 邮件地址不正确');
//		flag = false;
//	}
//}


function checkMobilePhone(mobile){
	if(mobile == ''){
		$('#mobile_phone_notice').css('color','red');
		$('#mobile_phone_notice').html('* 手机号码不能为空');
		flag = false;
	}else if(checkMobile(mobile)){
		$('#mobile_phone_notice').css('color','green');
		$('#mobile_phone_notice').html('* 可以注册');
		flag = true;
	}else{
		$('#mobile_phone_notice').css('color','red');
		$('#mobile_phone_notice').html('* 手机号码格式不正确');
		flag = false;
	}
}


function check_password(password) {
	if (password.indexOf(" ") != -1) {
		$(currentForm).find('#password_notice').css('color','red').html("登录密码不能包含空格");
		flag = false;
	} else if (password.length < 6) {
		$(currentForm).find('#password_notice').css('color','red').html('- 登录密码不能少于 6 个字符。');
		flag = false;
	} else {
		$(currentForm).find('#password_notice').css('color','green').html('可以注册');
		flag = true;
	}
}

function check_confirm_password(confirm_password) {
	var password = $(currentForm).find('#password').val();
//	if (password.indexOf(" ") != -1) {
//		$(currentForm).find('#confirm_password_notice').css('color','red').html("确认密码不能包含空格");
//		flag = false;
//		return false;
//	}
	if (confirm_password.length < 6) {
		$(currentForm).find('#confirm_password_notice').css('color','red').html('- 登录密码不能少于 6 个字符。');
		flag = false;
		return false;
	}
	if (confirm_password != password) {
		$(currentForm).find('#confirm_password_notice').css('color','red').html('两次密码不一致');
		flag = false;
	} else {
		$(currentForm).find('#confirm_password_notice').css('color','green').html('可以注册');
		flag = true;
	}
}


function check_submit()
{
	var username = $.trim($(currentForm).find('#username').val());
	var password = $(currentForm).find('#password').val();
	var password2= $(currentForm).find('#password2').val();
	if(username.length=0){
		layer.msg('请输入手机号码')
		return
	}
	if(password.length=0){
		layer.msg('请输入密码')
		return
	}
	if(password!=password2){
		layer.msg('两次密码输入不一致')
		return
	}
	console.log(flag)
	if(username.length >0 && password.length > 0 && password2.length > 0 && flag)
	{

		return true;
	} else{

		return false;
	}

}

function sendcode(o){
	var mobile = $.trim($('#username').val());
	checkMobilePhone(mobile);
	if(flag){
		$.ajax({
			url:'/index.php?m=Mobile&c=User&a=send_validate_code&t='+Math.random(),
			type:'post',
			dataType:'json',
			data:{type:$(o).attr('rel'),send:mobile},
			success:function(res){
				if(res.status==1){
					countdown(o);
				}else{
					layer.open({content:res.msg,time:2});
				}
			}
		})
	}
}

var wait = 150;
function countdown(obj, msg) {
	obj = $(obj);
	if (wait == 0) {
		obj.removeAttr("disabled");
		obj.val(msg);
		wait = 150;
	} else {
		if (msg == undefined || msg == null) {
			msg = obj.val();
		}
		obj.attr("disabled", "disabled");
		obj.val(wait + "秒后重新获取");
		wait--;
		setTimeout(function() {
			countdown(obj, msg)
		}, 1000)
	}
}

</script>
</body>
</html>